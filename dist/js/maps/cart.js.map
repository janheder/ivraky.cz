{"version":3,"sources":["cart.js"],"names":["cart","document","getElementsByClassName","length","cartSummaryToggle","getElementById","addEventListener","body","classList","toggle","cartSummaryClose","addInputListener","input","row","parentElement","overallPriceElement","querySelector","price","parseFloat","innerText","replace","calcEvent","this","value","toString","codePriceN","pricegoods","querySelectorAll","result","Array","from","reduce","sum","spanElm","Number","textContent","undefined","getAttribute","result_f","salePer","dataset","percentage","innerHTML","parseInt","pricesum","result2","result2_f","shipping","shippingLeft","call","recountCart","inputs","i","recountDeliveryCart","elms","deliveryCart","pricedel","deliveryprice","productprice","pricecart2","ia","toggleReg","toggleAttribute","onclick","e","t","removeAttribute"],"mappings":"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","file":"../cart.js","sourcesContent":["var cart = document.getElementsByClassName('cart-content');\r\nif (cart.length>0){\r\n\r\n\r\n    var cartSummaryToggle = document.getElementById('cartSummaryToggle');\r\n    if (cartSummaryToggle){\r\n        document.getElementById('cartSummaryToggle').addEventListener('click', function() {\r\n            document.body.classList.toggle('--cart-summary-active');\r\n        });\r\n    }\r\n\r\n    var cartSummaryClose = document.getElementById('cartSummaryClose');\r\n    if (cartSummaryClose){\r\n        document.getElementById('cartSummaryClose').addEventListener('click', function() {\r\n            document.body.classList.toggle('--cart-summary-active');\r\n        });\r\n    }\r\n\r\n    /* CART 1 */\r\n\r\n    function addInputListener(input) {\r\n\r\n        let row = input.parentElement.parentElement.parentElement;\r\n        \r\n        let overallPriceElement = row.querySelector('.cart-item-price span');\r\n        let price = parseFloat(row.querySelector('.cart-item-price-pc span').innerText.replace(/,/g, '.')); \r\n\r\n\r\n\r\n\r\n        let calcEvent = function() {\r\n\r\n            if (this.value > 0) {\r\n                overallPriceElement.innerText = (price * this.value).toString();\r\n            } else {\r\n                overallPriceElement.innerText = \"0\";\r\n            }\r\n\r\n\r\n            var codePriceN = 0;\r\n\r\n\r\n\r\n            if (document.getElementById('codePrice')){\r\n                let codePrice =  parseFloat(document.getElementById('codePrice').innerText);\r\n                codePriceN = codePrice;\r\n            }else{\r\n               codePriceN = 0;\r\n            }\r\n\r\n\r\n            let pricegoods = document.querySelectorAll('.cart-item-price span ');\r\n            let result = Array.from(pricegoods).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0);\r\n\r\n\r\n\r\n            if (document.getElementById('codePrice')){\r\n\r\n                if(document.getElementById('codePrice').getAttribute(\"data-percentage\") == undefined){\r\n               \r\n                    let result_f = (result-codePriceN).toString().replace(/\\./g, ',');\r\n                    document.getElementById('goodsprice').innerText = result_f;\r\n\r\n                }else{\r\n                   \r\n                    let salePer = document.getElementById('codePrice').dataset.percentage;\r\n                    document.getElementById('codePrice').innerHTML = parseInt(result*salePer);\r\n\r\n                    let x = result - (result*salePer);\r\n              \r\n                    let result_f = parseInt(x);\r\n                    document.getElementById('goodsprice').innerText = result_f;\r\n\r\n                }\r\n\r\n            }else{\r\n                let result_f = result.toString().replace(/\\./g, ',');\r\n                document.getElementById('goodsprice').innerText = result_f;\r\n            }\r\n            \r\n            \r\n            \r\n\r\n            let pricesum = document.querySelectorAll('.cart-item-price span, #delprice');\r\n            let result2 = Array.from(pricesum).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0); \r\n\r\n            if (document.getElementById('codePrice')){\r\n                if(document.getElementById('codePrice').getAttribute(\"data-percentage\") === null){\r\n               \r\n                    let result2_f = (result2-codePriceN).toString().replace(/\\./g, ',');\r\n                    document.getElementById('sumprice').innerText = result2_f;\r\n\r\n                }else{\r\n                   \r\n                    let salePer = document.getElementById('codePrice').dataset.percentage;\r\n                    document.getElementById('codePrice').innerHTML = parseInt(result2*salePer);\r\n\r\n                    let x = result2 - (result2*salePer);\r\n              \r\n                    let result2_f = parseInt(x);\r\n                    document.getElementById('sumprice').innerText = result2_f;\r\n\r\n                }\r\n            }else{\r\n                let result2_f = result2.toString().replace(/\\./g, ',');\r\n                document.getElementById('sumprice').innerText = result2_f;\r\n            }\r\n            \r\n            \r\n\r\n     \r\n            \r\n\r\n            let shipping = document.getElementById('cartFreeShipping');\r\n            let shippingTreshold = parseFloat(shipping.dataset.price);\r\n            let goodsPrice = parseFloat(document.getElementById('goodsprice').innerText.replace(/,/g, '.'));\r\n            let shippingLeft = shippingTreshold - goodsPrice;\r\n            if(shippingLeft <= 0){\r\n                shipping.innerHTML = \"Dopravu máte zdarma\";\r\n            }else{\r\n                shipping.innerHTML = \"Nakupte ještě za \" + shippingLeft + \" Kč a máte dopravu zdarma\";\r\n            }\r\n        \r\n\r\n        };\r\n        \r\n\r\n        input.addEventListener('change', calcEvent);\r\n        calcEvent.call(input); \r\n    }\r\n\r\n    function recountCart(){\r\n        let inputs = document.querySelectorAll('.cart-item-stepper .num_items');\r\n\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            addInputListener(input);\r\n        }\r\n    \r\n    }\r\n    recountCart();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /* CART 2 */\r\n    \r\n\r\n    function recountDeliveryCart(){\r\n    var elms = document.querySelectorAll('.cart-table-shipping-item');\r\n\r\n    function deliveryCart() {\r\n        let pricedel = document.querySelectorAll('.cart-table-shipping-item input:checked ~ .cart-table-shipping-price span');\r\n        let deliveryprice = Array.from(pricedel).reduce((sum, spanElm) => sum + Number(spanElm.textContent), 0);\r\n        document.getElementById('delprice').innerText = deliveryprice;\r\n\r\n        var productprice = document.getElementById('goodsprice').textContent;\r\n        var pricecart2 = deliveryprice +  parseInt(productprice)\r\n        document.getElementById('sumprice').innerText = pricecart2;\r\n\r\n    };\r\n\r\n    for (var ia = 0; ia < elms.length; ia++) {\r\n        elms[ia].addEventListener('click', deliveryCart, false);\r\n    }\r\n    }\r\n    recountDeliveryCart();\r\n\r\n\r\n\r\n\r\n\r\n    /* CART 3 */\r\n    if(document.getElementById('cart-form-user')){\r\n        function toggleReg() {\r\n            document.getElementById(\"cart-register-password\").toggleAttribute(\"required\"),\r\n            document.getElementById(\"cart-register-password\").toggleAttribute(\"disabled\")\r\n        }\r\n        document.getElementById(\"cart-register\").onclick = function() {\r\n            toggleReg();\r\n        }\r\n        if(document.getElementById(\"cart-fa-address\")){\r\n            document.getElementById(\"cart-fa-address\").onclick = function() {\r\n                for (var e = document.querySelectorAll(\"#cart-fa-address + div > .form-group:not(.--checkbox) > input:not(#cart-fa-name)\"), t = 0; t < e.length; ++t)\r\n                    e[t].toggleAttribute(\"required\")\r\n            }\r\n        }\r\n\r\n        document.getElementById(\"cart-fa-company\").onclick = function() {\r\n            for (var e = document.querySelectorAll(\"#cart-fa-company + div input\"), t = 0; t < e.length; ++t){\r\n                e[t].toggleAttribute(\"required\");\r\n            }\r\n            document.getElementById(\"fakturacni_jmeno\").toggleAttribute(\"required\");\r\n            document.getElementById(\"dic\").removeAttribute(\"required\");\r\n        } \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}"]}